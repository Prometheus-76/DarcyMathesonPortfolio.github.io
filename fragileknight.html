<!DOCTYPE HTML>
<!--
	Hyperspace by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<link rel="icon" href="images/signature.png">
		<title>Fragile Knight | Portfolio</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload light">

		<!-- Header -->
			<header id="header">
				<a href="index.html" class="title">Darcy Matheson Portfolio</a>
				<nav>
					<ul>
						<li><a href="index.html">Home</a></li>
						<li><a href="fragileknight.html" class="active">Portfolio</a></li>
					</ul>
				</nav>
			</header>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<section id="main" class="wrapper fade-up">
						<div class="inner">
							<h1 class="major">Fragile Knight | Portfolio</h1>
							<span class="image fit" style="margin-bottom:0;padding-bottom:0;width:90%;height:90%;display:block;margin:auto;"><img src="images/FragileKnight/Thumbnail.png" alt="Thumbnail" style="border-radius:1em;"/></span>
							<hr/>
							<h2>Project Details</h2>
							<h3>Technical</h3>
							<li><b>Engine:</b> Unity</li>
							<li><b>Language:</b> C#</li>
							<li><b>Platform:</b> PC</li>
							<li><b>Roles:</b> Solo Programmer, Lead Designer</li>
							<br/>
							<h3>Development</h3>
							<li><b>Duration:</b> 1 week</li>
							<li><b>Release Date:</b> March 16, 2021</li>
							<hr/>
							<h2>Overview</h2>
							<h3>Game</h3>
							<p>Fragile Knight is a <b>retro-style roguelike vertical platformer</b> about falling into a sewer, losing your sword and improvising to escape
							the rapidly rising water. Utilise a range of movement abilities including <b>wall jumping</b>, <b>shield bouncing</b> and <b>double jumping</b> to ascend 
							faster and faster towards the surface. Try again and again, improving your skills until you survive for the full 9 minutes through each of the game's
							<b>unique, progressively difficult, procedural</b> escape attempts. At the end of each run you will be awarded a <b>unique title</b> that represents
							your performance during the last attempt, as well as a score grading the overall proficiency of your skills.</p>
							<h3>Production</h3>
							<p>The game was designed, developed and produced by <b>myself, and two other friends</b>, of the three of us, I wrote all of the code for the project. 
							Fragile Knight was a submission to the <b>7 Day Rogue-Like</b> game jam, in which participants are given a week to create a rogue-like game, which must 
							involve <b>procedurally generated gameplay</b> and <b>permadeath</b>. As we chose to make semi-curated content for the platforming sections, I had to 
							develop <b>a tool to create, save and edit gameplay sections</b>, which could then be <b>procedurally recreated at runtime</b>. During the week we kept 
							everyone on track using a <b>Trello board</b>. I managed the entire <b>Unity project</b> myself, importing assets when they became available.</p>
							<hr/>
							<h2>Contribution</h2>
							<h3>On this project I contributed...</h3>
							<li>4,868 lines of code across 18 separate scripts</li>
							<li>67 unique sprites (including all tiles)</li>
							<li>8 sounds created and 3 sourced and implemented</li>
							<li>46 contextual tile definitions for determining sprites</li>
							<li>1 custom tool for gameplay template creation</li>
							<li>14 gameplay templates for generation</li>
							<br/>
							<p>I was responsible for managing all of the <b>project files</b> and tuning the player's movement and overall gameplay difficulty.</p>
							<hr/>
							<h2>About the code</h2>
							<h3>Level Editor</h3>
							<p>When creating a tool to build the platforming sections for our game, I had to answer a few critical questions first:</p>
							<ol>
								<li>How should the layouts be saved and loaded? What file format would be most effective for this?</li>
								<li>How could I determine which tile sprite should be placed based on it's surrounding tiles?</li>
							</ol>
							<p>When saving the sections, I decided to use a basic <b>text file</b> with a unique extension for our format (<b>.rlt</b>, short for 
							<b>"rogue-like template"</b>). I used C#'s in-built <b>StreamReader/StreamWriter</b> classes for this, and scrambled the data with a simple
							custom encryption algorithm I wrote. The end result is a text file with lines and lines of scrambled information, each one representing a <b>position</b>, 
							<b>tileset</b> and <b>tile number</b>. A collection of these files are read at runtime to <b>procedurally assemble the gameplay</b> of Fragile Knight, one tile at a time.</p>
							<p>Next, to determine which tile sprite should go into each space, I created a <b>spreadsheet</b> and several <b>graphic references</b> to manually figure out the permutations, 
							then I transferred that into code. Thankfully there was a <b>one-to-one correspondance</b> between possible surrounding tiles and the determined tile in the center of them,
							so I never had to cross-check after determining a tile sprite.</p>
							<video style="border-radius:1em;display:block;margin:auto;" width=90% height=90% controls><source src="/videos/FragileKnight/FragileKnight_Editor.mp4"></video>
							<p style="text-align:center;"><i>The level editor tool I built for Fragile Knight.</i></p>
							<h3>Movement</h3>
							<p>Once the <b>level editor tool</b> was completed, I worked on the <b>player movement</b>, making it as configurable as I could. Ideally replicating the forigiving,
							responsive controls of another 2D platformer, <b>Celeste</b>. When scripting, especially while working with others, I have always ensured my variables are well 
							organised using <b>attributes</b> and <b>tooltips</b> wherever necessary. Below is the <b>inspector panel</b> for the player character.</p>
							<span class="image fit" style="border-radius:1em;margin-bottom:0;padding-bottom:0;width:90%;height:90%;display:block;margin:auto;"><img src="images/FragileKnight/Parameters.png" alt="NavMesh Surfaces in Undercooked" /></span>
							<p style="text-align:center;"><i>The inspector panel of the player character.</i></p>
							<p>As you can see, there is quite a bit of nuance to the player's movement, ultimately resulting in a more <b>organic-feeling</b> movement system. Additionally,
							there were multiple <b>timing windows</b> built into the movement system, forgiving <b>slightly early or late inputs</b> in all kinds of scenarios. I found this was
							especially crucial when <b>wall-jumping</b>, as player instinct is often to move away from the wall a little before jumping, which normally would result in a
							failed wall-jump. I've been building these <b>input buffers</b> into all my <b>character controllers</b> whenever I can, and the benefits to overall <b>player 
							satisfaction</b> cannot be understated.</p>
							<h3>Level Generation</h3>
							<p>Having <b>gameplay sections</b> stored in files is a good start, but what I really needed was a way to then <b>read the data</b> and <b>assemble 
							gameplay at runtime</b>. Decoding the <b>encrypted data</b> was pretty easy, as I already had the code required to do this, but procedurally generating
							the <b>objects and components</b> required for turning that into <b>hitboxes and graphics</b> using this info was a little more involved.</p>
							<p>The gameplay sections are <b>generated and unloaded</b> one at a time as the player ascends during a run. The parent gameobject is generated
							entirely through script, then given the required components to function, a <b>Grid, Tilemap, Tilemap Renderer, Tilemap Collider 2D, and Rigidbody 2D</b>
							are all added and configured, then the <b>tiles</b> are laid onto it by reading the <b>section data</b> line by line, with <b>enemies and hazards</b>
							added as <b>separate child objects</b> due to their potentially <b>dynamic</b> nature.</p>
							<p>Finally, with the ability to <b>recreate sections</b> with the <b>stored level data</b>, I added a <b>randomiser</b> with some extra code to 
							prevent any given section appearing twice in a row or uneven section distribution. This works using a <b>bag randomiser</b> like <b>Tetris</b>,
							and then I check if the <b>first element</b> of the new set is the same as the <b>last element</b> of the last set, and if this is true then 
							the new order is reversed. Choosing sections this way is great for <b>gameplay</b>, as the player doesn't notice <b>repetition</b> nearly as 
							much as they would with an <b>unfiltered randomiser</b>.</p>
							<video style="border-radius:1em;display:block;margin:auto;" width=90% height=90% controls><source src="/videos/FragileKnight/FragileKnight_Generation.mp4"></video>
							<p style="text-align:center;"><i>A zoomed out view of the Unity editor during gameplay, showing the level generation.</i></p>
							<h3>Afterword</h3>
							<p>Game Jam participation was, as always, an enlightening, enjoyable, stressful time for me. This 7DRL was no exception. I consistently come out of them tired but grateful 
							for the experience, having learned tons about game development, team coordination, and problem-solving. Fragile Knight was by far the best work we have produced in a jam so 
							far (as of early 2021). I'm incredibly proud of the end result we produced as a group, and feel very grateful to have worked with such talented members over that short week 
							of development.</p> 
							<p>While it still has its flaws, the game we made then continues to motivate me, as a display of what my group and I are capable of within such a short period 
							of time as well as personal growth and improvement over past game jam entries. It tested my communication, patience, and ability to solve problems under pressure, and yet 
							we persevered and completed the game on time, even having time for some quick patches after the initial release.</p>
							<span class="image fit" style="border-radius:1em;margin-bottom:0;padding-bottom:0;width:90%;height:90%;display:block;margin:auto;"><img src="images/FragileKnight/Knight.png" alt="NavMesh Surfaces in Undercooked" /></span>
							<p style="text-align:center;"><i>The player character in Fragile Knight, unconscious before the start of a new escape attempt.</i></p>
							<hr/>
							<h2>Thank you for reading!</h2>
							<p>Feel free to check out the store page for the game on Itch.io or simply return to the home page.</p>
							<ul class="actions">
								<li><a href="https://prometheusgamedev.itch.io/fragile-knight" target="_blank" class="button">Download Game</a></li>
								<li><a href="index.html" class="button primary">Return Home</a></li>
							</ul>
						</div>
					</section>

			</div>

		<!-- Footer -->
			<footer id="footer" class="wrapper alt">
				<div class="inner">
					<ul class="menu">
						<li>Site by Darcy Matheson</li>
					</ul>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>